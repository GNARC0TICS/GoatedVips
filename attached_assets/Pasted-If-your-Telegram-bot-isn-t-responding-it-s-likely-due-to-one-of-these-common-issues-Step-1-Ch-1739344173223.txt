If your Telegram bot isn’t responding, it’s likely due to one of these common issues:

🚨 Step 1: Check If Another Bot Instance Is Running

Since you’re running npm run dev, a previously deployed instance may still be active, causing conflicts.

✅ Fix: Stop Any Running Instances

Run the following in your terminal:

ps aux | grep node

Look for any existing instances of your bot and kill them:

kill -9 <PID>

(Replace <PID> with the process ID of your running bot.)

Then restart the bot manually:

npm run dev

🚨 Step 2: Ensure Your Bot is Listening

Run:

npm run dev

Then, in another terminal, check the logs:

tail -f logs.txt

OR manually add a console.log at the top of your bot code:

console.log("🚀 Bot is running and listening for messages...");

If the log doesn’t appear, the bot isn’t starting properly.

🚨 Step 3: Verify That Your Bot Token Is Correct

Check if your .env file has the correct TELEGRAM_BOT_TOKEN:

echo $TELEGRAM_BOT_TOKEN

If it’s empty or incorrect, update your .env file:

TELEGRAM_BOT_TOKEN=your_correct_token_here

Then restart:

npm run dev

🚨 Step 4: Confirm That Your Bot is Listening to Commands

Use the following Telegram command in your bot’s chat:

/start

If there’s no response, force the bot to restart and listen by adding:

bot.on("message", (msg) => {
  console.log(`📩 Received message: ${msg.text}`);
});

Then restart.

🚨 Step 5: Check for Conflicting Deployments

If your bot is already deployed, it might be taking priority over your local instance.

✅ Fix: Disable the Deployed Bot
	•	Go to your Replit or server where it’s deployed.
	•	Stop the running bot (pm2 stop <process> if using PM2).
	•	Restart your local bot (npm run dev).

🚨 Step 6: Check Telegram Webhooks (If Previously Deployed)

Your bot might be in webhook mode, which prevents polling.

✅ Fix: Remove Webhook & Enable Polling

Run this in your terminal:

curl -F "url=" https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook

Then restart:

npm run dev

🚀 Summary of Fixes

1️⃣ Kill any running bot instances.
2️⃣ Restart your bot & check logs.
3️⃣ Verify the Telegram bot token.
4️⃣ Confirm the bot is receiving messages.
5️⃣ Ensure your local bot isn’t overridden by a deployed instance.
6️⃣ **